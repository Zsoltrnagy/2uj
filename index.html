<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PriceFirstNow - Instant Price Ranges</title>
  <meta name="description" content="Instant local price ranges for cleaning, remodeling, plumbing, HVAC, and pet care in Broward & Palm Beach." />

  <style>
    :root{
      --bg:#070b34;
      --text:#ffffff;
      --muted:#c7d2fe;
      --border:rgba(255,255,255,.16);
      --shadow:0 22px 70px rgba(0,0,0,.45);
      --accent:#22d3ee;
      --accent2:#a78bfa;
      --accent3:#34d399;
      --ink:#031018;
      --radius:22px;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 650px at 10% -10%, rgba(34,211,238,.35), transparent),
        radial-gradient(900px 650px at 90% 0%, rgba(167,139,250,.35), transparent),
        radial-gradient(900px 650px at 70% 120%, rgba(52,211,153,.22), transparent),
        var(--bg);
      min-height:100vh;
    }

    a{color:inherit;text-decoration:none}

    .container{max-width:1180px;margin:0 auto;padding:22px}

    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      padding:8px 0 18px;
    }

    .brand{display:flex;align-items:center;gap:12px;font-weight:900;letter-spacing:.2px}
    .mark{width:42px;height:42px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:var(--shadow)}
    .brandName{font-size:18px}

    nav{display:flex;gap:14px;flex-wrap:wrap}
    nav a{font-weight:800;opacity:.9}
    nav a:hover{opacity:1;text-decoration:underline}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .hero{
      display:grid;
      grid-template-columns:1.1fr .9fr;
      gap:18px;
      align-items:stretch;
    }

    .heroLeft{padding:30px}
    .heroRight{padding:20px}

    h1{margin:0 0 12px;font-size:46px;line-height:1.05}
    h2{margin:0 0 10px;font-size:22px}
    h3{margin:0 0 6px}
    .muted{color:var(--muted);line-height:1.55}

    .ctaRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}

    .btn{
      padding:12px 16px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.18);
      font-weight:900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      background:rgba(255,255,255,.10);
      color:var(--text);
      transition:transform .12s ease, opacity .12s ease;
      user-select:none;
    }

    .btn.primary{
      background:linear-gradient(135deg,var(--accent),var(--accent3));
      border:0;
      color:var(--ink);
    }

    .btn.ghost{background:rgba(255,255,255,.10)}

    .btn:hover{transform:translateY(-1px);opacity:1}

    .badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .badge{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.08);
      font-weight:900;
      font-size:13px;
    }

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .tab{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.20);
      background:rgba(255,255,255,.10);
      cursor:pointer;
      font-weight:900;
      white-space:nowrap;
    }
    .tab.active{background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--ink);border:0}

    form{display:grid;gap:10px}
    .row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}

    label{font-size:12px;font-weight:900;color:var(--muted)}

    input, select, textarea{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
    }
    input:focus, select:focus, textarea:focus{border-color:rgba(34,211,238,.55)}

    textarea{min-height:86px;resize:vertical}

    .quoteBox{
      margin-top:12px;
      padding:16px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.30);
    }
    .quoteAmt{font-size:26px;font-weight:1000;letter-spacing:.2px}
    .fine{color:var(--muted);font-size:13px;line-height:1.55;margin:0}

    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:18px}
    .mini{padding:16px}
    .mini p{margin:0;color:var(--muted);line-height:1.55}

    section{padding:20px;margin-top:18px;scroll-margin-top:90px}

    footer{margin:28px 0 8px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px}

    .hidden{display:none !important;}

    @media (max-width:960px){
      .hero{grid-template-columns:1fr}
    }
    @media (max-width:640px){
      h1{font-size:34px}
      .heroLeft{padding:22px}
      .heroRight{padding:16px}
      .row2{grid-template-columns:1fr}
      .btn{width:100%}
      nav{justify-content:center}
      header{flex-direction:column;align-items:flex-start}
    }
    @media (max-width:560px){
      h1{font-size:36px;line-height:1.08}
      .ctaRow{flex-direction:column}
      .grid3{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
<div class="container">

  <header>
    <div class="brand">
      <div class="mark"></div>
      <div class="brandName">PriceFirstNow</div>
    </div>

    <nav>
      <a href="#quote">Get Quote</a>
      <a href="#how">How it works</a>
      <a href="#providers">Providers</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <div class="hero">
    <section class="card heroLeft">
      <h1>See the price first.<br>Then choose your provider.</h1>
      <p class="muted">Instant price ranges for home services in Broward and Palm Beach County. No calls. No pressure.</p>

      <div class="ctaRow">
        <button class="btn primary" id="scrollQuoteBtn">Get Instant Quote</button>
        <button class="btn ghost" id="scrollProviderBtn">Become a Provider</button>
      </div>

      <div class="ctaRow" style="margin-bottom:12px">
        <!-- Removed DOWNLOAD HTML button -->
      </div>

      <div class="badges">
        <div class="badge">60-second estimate</div>
        <div class="badge">Price-aware clients</div>
        <div class="badge">Local matching</div>
        <div class="badge">No bank info</div>
      </div>
    </section>

    <section class="card heroRight" id="quote">

      <div class="tabs">
        <button class="tab active" data-svc="cleaning">Cleaning</button>
        <button class="tab" data-svc="pet">Pet Care</button>
        <button class="tab" data-svc="remodel">Remodeling</button>
        <button class="tab" data-svc="plumbing">Plumbing</button>
        <button class="tab" data-svc="hvac">HVAC</button>
      </div>

      <h2>Instant Price Estimate</h2>

      <form id="quoteForm" autocomplete="on">

        <div class="row2">
          <div>
            <label for="county">County</label>
            <select id="county">
              <option value="broward" selected>Broward</option>
              <option value="palmbeach">Palm Beach</option>
            </select>
          </div>

          <div>
            <label for="zip">ZIP Code</label>
            <input id="zip" inputmode="numeric" maxlength="5" placeholder="33063" required />
          </div>
        </div>

        <div>
          <label for="service">Service type</label>
          <select id="service"></select>
        </div>

        <!-- CLEANING — bedroom count instead of sq ft -->
        <div id="bedroomWrap" class="">
          <label for="bedrooms">Bedrooms</label>
          <select id="bedrooms">
            <option value="1" selected>1 Bedroom</option>
            <option value="2">2 Bedrooms</option>
            <option value="3">3 Bedrooms</option>
            <option value="4">4+</option>
          </select>
        </div>

        <!-- SIZE — hidden if cleaning selected -->
        <div id="sizeWrap">
          <label for="size" id="sizeLabel">Area / size (sq ft)</label>
          <input id="size" inputmode="numeric" placeholder="e.g. 500" />
        </div>

        <!-- Painting conditional -->
        <div id="paintingScopeWrap" class="hidden">
          <label for="paintingScope">If painting: scope</label>
          <select id="paintingScope">
            <option value="Walls only" selected>Walls only</option>
            <option value="Walls + ceilings">Walls + ceilings</option>
            <option value="Ceilings only">Ceilings only</option>
            <option value="Trim / doors">Trim / doors</option>
            <option value="Full repaint">Full repaint</option>
          </select>
        </div>

        <!-- Flooring conditional -->
        <div id="flooringMaterialWrap" class="hidden">
          <label for="flooringMaterial">Flooring material</label>
          <select id="flooringMaterial">
            <option value="Tile" selected>Tile</option>
            <option value="Wood">Wood</option>
            <option value="Natural stone">Natural stone</option>
            <option value="Laminate">Laminate</option>
            <option value="Carpet">Carpet</option>
          </select>
        </div>

        <!-- Pet care -->
        <div id="petOptionsWrap" class="hidden">
          <div class="row2">
            <div>
              <label for="petOption">Pet service option</label>
              <select id="petOption"></select>
            </div>

            <div>
              <label for="petCount">Pet count</label>
              <select id="petCount">
                <option value="1" selected>1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4+</option>
              </select>
            </div>
          </div>
        </div>

        <div>
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="e.g., condo rules, access, materials already purchased..."></textarea>
        </div>

        <div class="row2">
          <div>
            <label for="needWhen">When do you need it?</label>
            <select id="needWhen">
              <option value="Flexible" selected>Flexible</option>
              <option value="ASAP">ASAP</option>
              <option value="Within 1 week">Within 1 week</option>
              <option value="Within 2-4 weeks">Within 2-4 weeks</option>
              <option value="1-2 months">1-2 months</option>
            </select>
          </div>

          <div>
            <label for="serviceLevel">Service level</label>
            <select id="serviceLevel">
              <option value="Standard" selected>Standard</option>
              <option value="Budget">Budget</option>
              <option value="Premium">Premium</option>
              <option value="Luxury">Luxury</option>
            </select>
          </div>
        </div>

        <button class="btn primary" id="showBtn" type="button">Show Price Range</button>

        <div class="quoteBox" id="quoteBox" style="display:none">
          <div class="quoteAmt" id="result"></div>
          <p class="fine">Estimates are market-based ranges from local providers. Final pricing depends on scope, access, materials, and site conditions.</p>
          <p class="fine" id="typical" style="margin-top:6px"></p>

          <div class="row2" style="margin-top:12px">
            <div>
              <label for="leadName">Your name</label>
              <input id="leadName" autocomplete="name" />
            </div>
            <div>
              <label for="leadPhone">Phone</label>
              <input id="leadPhone" inputmode="tel" placeholder="954-555-1234" />
            </div>
          </div>

          <div style="margin-top:10px">
            <label for="leadEmail">Email (required)</label>
            <input id="leadEmail" type="email" autocomplete="email" required />
          </div>

          <button class="btn ghost" id="matchBtn" type="button">Get Matched</button>
          <p class="fine" id="matchStatus" style="margin-top:8px"></p>

        </div>
      </form>
    </section>
  <!-- HOW IT WORKS -->
  <div class="grid3" id="how">
    <div class="card mini">
      <h3>1) Answer a few questions</h3>
      <p>We estimate based on job details, service type, and local market ranges.</p>
    </div>

    <div class="card mini">
      <h3>2) Get a price range instantly</h3>
      <p>Transparent ranges help you avoid surprises and avoid wasted calls.</p>
    </div>

    <div class="card mini">
      <h3>3) Get matched with providers</h3>
      <p>We route your request to providers that match your service and area.</p>
    </div>
  </div>

  <!-- PROVIDERS -->
  <section class="card" id="providers">
    <h2>Become a Provider</h2>
    <p class="muted">
      Get price-aware local leads. No monthly fees during launch.  
      Providers receive direct client inquiries through email.
    </p>

    <label for="pname">Name</label>
    <input id="pname" autocomplete="name" />

    <label for="pcompany" style="margin-top:10px">Company</label>
    <input id="pcompany" autocomplete="organization" />

    <label for="pemail" style="margin-top:10px">Email</label>
    <input id="pemail" type="email" autocomplete="email" />

    <button class="btn primary" type="button" id="providerApplyBtn" style="margin-top:14px">
      Send Application
    </button>

    
    </p>
  </section>

  <!-- CONTACT -->
  <section class="card" id="contact">
    <h2>Contact</h2>
    <p class="muted">Questions or early access?</p>

    <a id="contactLink" class="btn ghost" href="#">Email Us</a>

    <p class="fine" style="margin-top:10px">
      Current admin email: <span id="adminEmailText" style="font-weight:900"></span>
    </p>

    
    </p>
  </section>

  <!-- FOOTER -->
  <footer>
    <div>&copy; <span id="year"></span> PriceFirstNow</div>
  </footer>
<!-- Hidden Netlify form so Netlify detects lead form -->
<form name="lead" id="netlifyLeadForm" method="POST" data-netlify="true" netlify-honeypot="bot-field" class="hidden">
  <input type="hidden" name="form-name" value="lead" />
  <p class="hidden"><label>Do not fill this out: <input name="bot-field" /></label></p>

  <input type="text" name="leadName" />
  <input type="text" name="leadPhone" />
  <input type="email" name="leadEmail" />

  <input type="text" name="county" />
  <input type="text" name="zip" />
  <input type="text" name="category" />
  <input type="text" name="serviceType" />

  <input type="text" name="stories" />
  <input type="text" name="prep" />
  <input type="text" name="size" />
  <input type="text" name="paintingScope" />
  <input type="text" name="flooringMaterial" />
  <input type="text" name="petOption" />
  <input type="text" name="petCount" />

  <input type="text" name="needWhen" />
  <input type="text" name="serviceLevel" />
  <input type="text" name="estimateLow" />
  <input type="text" name="estimateHigh" />
  <textarea name="notes"></textarea>
</form>

<script>
(function(){

  /* ------------------------------------------
      CONFIG
  ------------------------------------------ */

  var DEFAULT_ADMIN_EMAIL = "pricefirstnow@gmail.com";
  var ADMIN_EMAIL = localStorage.getItem("PFN_ADMIN_EMAIL") || DEFAULT_ADMIN_EMAIL;

  var COUNTY_MULT = { broward: 1.00, palmbeach: 1.08 };

  var SERVICE_LIST = {
    cleaning: ["Standard Cleaning", "Deep Cleaning", "Move in/out"],
    pet: ["Walking", "Sitting", "Wash and Haircut"],
    remodel: ["Interior Painting", "Exterior Painting", "Flooring", "Drywall", "Carpentry", "Other"],
    plumbing: ["New Construction or Remodel", "Leak Detection", "Water Supply System", "Drain-Waste-Vent (DWV)", "Water Heaters", "Disposal Replacement", "Other"],
    hvac: ["Complete System Installation", "Ductwork", "Duct Cleaning", "Service and Repairs", "Preventive Maintenance", "Indoor Air Quality", "Controls and Energy Efficiency", "Commercial or Condo Work"]
  };

  var PET_OPTIONS = {
    Walking: [
      { label: "30-minute (small)", value: "walk30s", low: 20, high: 40 },
      { label: "30-minute (medium)", value: "walk30m", low: 25, high: 45 },
      { label: "30-minute (large)", value: "walk30l", low: 30, high: 55 },
      { label: "60-minute (small)", value: "walk60s", low: 35, high: 60 },
      { label: "60-minute (medium)", value: "walk60m", low: 40, high: 70 },
      { label: "60-minute (large)", value: "walk60l", low: 45, high: 85 }
    ],
    Sitting: [
      { label: "Drop-in (small)", value: "sit_s", low: 25, high: 45 },
      { label: "Drop-in (medium)", value: "sit_m", low: 30, high: 55 },
      { label: "Drop-in (large)", value: "sit_l", low: 35, high: 70 },
      { label: "Overnight (small)", value: "night_s", low: 80, high: 140 },
      { label: "Overnight (medium)", value: "night_m", low: 90, high: 160 },
      { label: "Overnight (large)", value: "night_l", low: 110, high: 200 }
    ],
    "Wash and Haircut": [
      { label: "Small pet", value: "groom_s", low: 60, high: 110 },
      { label: "Medium pet", value: "groom_m", low: 80, high: 150 },
      { label: "Large pet", value: "groom_l", low: 110, high: 220 }
    ]
  };

  /* ------------------------------------------
      HELPERS
  ------------------------------------------ */

  function $(id){ return document.getElementById(id); }
  function money(n){ return "$" + Math.round(n).toLocaleString(); }
  function validateZip(v){ return /^[0-9]{5}$/.test(String(v).trim()); }

  // Narrow band by 20%
  function adjustBand(lo, hi){
    return { lo: lo * 1.05, hi: hi * 0.80 };
  }

  function typical(lo, hi){
    var span = hi - lo;
    return { lo: lo + span * 0.35, hi: lo + span * 0.65 };
  }

  function setMatchStatus(msg, ok){
    var el = $("matchStatus");
    el.textContent = msg;
    el.style.color = ok ? "#bbf7d0" : "#fecaca";
  }

  /* ------------------------------------------
      CATEGORY SWITCHING
  ------------------------------------------ */

  var activeCategory = "cleaning";

  function setCategory(cat){
    activeCategory = cat;

    document.querySelectorAll(".tab").forEach(btn=>{
      btn.classList.toggle("active", btn.dataset.svc === cat);
    });

    var sel = $("service");
    sel.innerHTML = "";
    SERVICE_LIST[cat].forEach(function(s){
      var o = document.createElement("option");
      o.value = o.textContent = s;
      sel.appendChild(o);
    });

    refreshConditionalFields();
    hideQuote();
  }

  /* ------------------------------------------
      CONDITIONAL FIELDS
  ------------------------------------------ */

  function refreshConditionalFields(){
    var service = $("service").value;

    // Bedrooms shown only for cleaning
    $("bedroomWrap").classList.toggle("hidden", activeCategory !== "cleaning");

    // Size hidden for cleaning + pet
    $("sizeWrap").classList.toggle("hidden", activeCategory === "cleaning" || activeCategory === "pet");

    // Painting conditional
    var isPaint = service.toLowerCase().includes("paint");
    $("paintingScopeWrap").classList.toggle("hidden", !isPaint);

    // Flooring conditional
    $("flooringMaterialWrap").classList.toggle("hidden", service !== "Flooring");

    // Pet care
    $("petOptionsWrap").classList.toggle("hidden", activeCategory !== "pet");

    refreshPetOptions();
  }

  function refreshPetOptions(){
    if(activeCategory !== "pet") return;

    var subtype = $("service").value;
    var sel = $("petOption");
    sel.innerHTML = "";

    (PET_OPTIONS[subtype] || []).forEach(function(o){
      var opt = document.createElement("option");
      opt.value = o.value;
      opt.textContent = o.label;
      sel.appendChild(opt);
    });
  }

  function hideQuote(){
    $("quoteBox").style.display = "none";
    setMatchStatus("", true);
  }

  /* ------------------------------------------
      PRICE CALCULATION
  ------------------------------------------ */

  function calculate(){
    var zip = $("zip").value.trim();
    if(!validateZip(zip)){
      alert("Please enter a valid 5-digit ZIP code.");
      return null;
    }

    var subtype = $("service").value;
    var bedrooms = Number($("bedrooms").value);
    var rawSize = Number($("size").value);
    var size = rawSize > 0 ? rawSize : 1;

    var low = 0, high = 0;

    /* CLEANING — bedroom-based */
    if(activeCategory === "cleaning"){
      var base = {1:80, 2:120, 3:160, 4:220}[bedrooms] || 120;
      if(subtype === "Deep Cleaning") base *= 1.55;
      if(subtype === "Move in/out") base *= 1.75;
      low = base * 0.9;
      high = base * 1.25;
    }

    /* PET CARE */
    else if(activeCategory === "pet"){
      var sel = $("petOption").value;
      var subtypeList = PET_OPTIONS[subtype] || [];
      var chosen = subtypeList.find(o => o.value === sel) || subtypeList[0];

      var petCount = Number($("petCount").value);
      var countMult = {1:1.0, 2:1.3, 3:1.55, 4:1.8}[petCount] || 1;

      low = chosen.low * countMult;
      high = chosen.high * countMult;
    }

    /* DISPOSAL REPLACEMENT */
    else if(subtype === "Disposal Replacement"){
      low = 250 * size;
      high = 650 * size;
    }

    /* ALL OTHER TRADES — sq ft based */
    else {
      low = size * 1.5;
      high = size * 3.5;
    }

    /* SERVICE MULTIPLIER */
    var mult = {cleaning:1.0, pet:1.0, remodel:1.25, plumbing:1.15, hvac:1.4}[activeCategory] || 1;
    low *= mult; high *= mult;

    /* COUNTY */
    var cm = COUNTY_MULT[$("county").value] || 1;
    low *= cm; high *= cm;

    /* NARROW BAND */
    var b = adjustBand(low, high);

    return {
      low: b.lo,
      high: b.hi,
      bedrooms: bedrooms,
      size: size,
      subtype: subtype,
      cat: activeCategory,
      zip: zip,
      county: $("county").value,
      notes: $("notes").value.trim()
    };
  }

  /* ------------------------------------------
      MATCH (Netlify → fallback to email)
  ------------------------------------------ */

  function submitLead(payload){
    var body = Object.keys(payload)
      .map(k => encodeURIComponent(k) + "=" + encodeURIComponent(payload[k] || ""))
      .join("&");

    // Works only when published on Netlify
    if(location.protocol === "file:"){
      setMatchStatus("Open this on Netlify to submit leads.", false);
      return;
    }

    fetch("/", {
      method:"POST",
      headers:{ "Content-Type":"application/x-www-form-urlencoded" },
      body:body
    })
    .then(r => {
      if(r.ok){
        setMatchStatus("Submitted — a provider will contact you soon!", true);
      } else {
        fallbackEmail(payload);
      }
    })
    .catch(()=> fallbackEmail(payload));
  }

  function fallbackEmail(p){
    var msg =
      "Lead Request\n\n" +
      "Category: " + p.cat + "\n" +
      "Service: " + p.subtype + "\n" +
      "ZIP: " + p.zip + "\n\n" +
      "Estimate: " + money(p.estimateLow) + " - " + money(p.estimateHigh) + "\n\n" +
      "Name: " + p.leadName + "\n" +
      "Phone: " + p.leadPhone + "\n" +
      "Email: " + p.leadEmail + "\n\n" +
      (p.notes ? "Notes:\n" + p.notes : "");

    window.location.href =
      "mailto:" + ADMIN_EMAIL +
      "?subject=" + encodeURIComponent("New Lead Request") +
      "&body=" + encodeURIComponent(msg);
  }

  /* ------------------------------------------
      EVENT LISTENERS
  ------------------------------------------ */

  document.querySelectorAll(".tab").forEach(btn=>{
    btn.addEventListener("click", ()=> setCategory(btn.dataset.svc));
  });

  $("service").addEventListener("change", ()=>{ refreshConditionalFields(); hideQuote(); });
  $("bedrooms").addEventListener("change", hideQuote);
  $("size").addEventListener("input", hideQuote);
  $("petOption").addEventListener("change", hideQuote);
  $("petCount").addEventListener("change", hideQuote);

  $("showBtn").addEventListener("click", function(){
    var r = calculate();
    if(!r) return;

    $("result").textContent = money(r.low) + " - " + money(r.high);

    var t = typical(r.low, r.high);
    $("typical").textContent =
      "Most similar jobs land around " + money(t.lo) + " - " + money(t.hi);

    $("quoteBox").style.display = "block";
  });

  $("matchBtn").addEventListener("click", function(){
    var r = calculate();
    if(!r) return;

    var name = $("leadName").value.trim();
    var phone = $("leadPhone").value.trim();
    var email = $("leadEmail").value.trim();

    if(!name) return alert("Please enter your name.");
    if(!phone) return alert("Please enter your phone number.");
    if(!email || !email.includes("@")) return alert("Please enter a valid email.");

    var payload = {
      "form-name":"lead",
      leadName:name,
      leadPhone:phone,
      leadEmail:email,
      county:r.county,
      zip:r.zip,
      category:r.cat,
      serviceType:r.subtype,
      size:r.size,
      bedrooms:r.bedrooms,
      estimateLow:Math.round(r.low),
      estimateHigh:Math.round(r.high),
      notes:r.notes
    };

    setMatchStatus("Submitting...", true);
    submitLead(payload);
  });

  $("providerApplyBtn").addEventListener("click", function(){
    var name = $("pname").value.trim();
    var company = $("pcompany").value.trim();
    var email = $("pemail").value.trim();

    if(!name || !email) return alert("Please enter your name and email.");

    var msg = "Provider Application\n\n" +
      "Name: " + name + "\n" +
      "Company: " + company + "\n" +
      "Email: " + email;

    window.location.href =
      "mailto:" + ADMIN_EMAIL +
      "?subject=Provider Application" +
      "&body=" + encodeURIComponent(msg);
  });

  $("contactLink").addEventListener("click", function(e){
    e.preventDefault();
    window.location.href =
      "mailto:" + ADMIN_EMAIL +
      "?subject=PriceFirstNow Inquiry";
  });

  $("setEmailLink").addEventListener("click", function(e){
    e.preventDefault();
    var next = prompt("Enter admin email:", ADMIN_EMAIL);
    if(!next) return;
    ADMIN_EMAIL = next.trim();
    localStorage.setItem("PFN_ADMIN_EMAIL", ADMIN_EMAIL);
    $("adminEmailText").textContent = ADMIN_EMAIL;
    alert("Saved.");
  });

  /* ------------------------------------------
      INIT
  ------------------------------------------ */

  $("adminEmailText").textContent = ADMIN_EMAIL;
  $("year").textContent = new Date().getFullYear();
  setCategory("cleaning");

})();
</script>

